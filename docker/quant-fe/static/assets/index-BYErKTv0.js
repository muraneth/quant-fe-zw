import{j as n,c as he,T as me,L as pe,D as fe}from"./material-COW0SMLn.js";import{r as D,c as ge,a as ye,i as _e,b as C,u as Z,f as v,e as xe,s as Y,g as Q,d as je}from"./index-CHtSF-Y4.js";import{aB as S,aF as ve,Q as be,x as R,U as Ie,aG as ee,aH as Te,aA as ke,G as Ce,W as Me,aI as Se,R as te,M as se,g as ne,_ as Ne,a4 as we}from"./vendor-Cs-uUMSt.js";import{w as Pe,a as Ae,c as De,u as Ye,F as Oe}from"./form-render-UbzBIIsu.js";var A=(s=>(s.PRICE_LINE="price_line",s.INDEPENDENT_LINE="independent_line",s.X_BAR="x_bar",s.X_BAR_STACK="x_bar_stack",s.Y_BAR="y_bar",s.Y_BAR_STACK="y_bar_stack",s.AREA_STACK="area_stack",s))(A||{});function Be(s){return D({url:"/data/api/token/searchToken",method:"GET",params:s})}function ze(s){return D({url:"/data/api/token/getTokenMarketInfo",method:"GET",params:s})}function ae(){return D({url:"/data/api/base/indicatorList",method:"GET"})}function Ee(s){return D({url:"/data/api/indicator",method:"POST",params:s})}function $e(s){return D({url:"/data/api/base/price",method:"POST",params:s})}function Re(s){return D({url:"/data/api/userIndicator/collectInd",method:"POST",params:s})}function Fe(s){return D({url:"/data/api/userIndicator/uncollectInd",method:"POST",params:s})}function We(s){return D({url:"/data/api/userIndicator/saveIndParam",method:"POST",params:s})}const{Text:He}=antd.Typography,K=({suffixCount:s=12,children:a,className:r,title:e})=>{const t=a==null?void 0:a.slice(0,(a==null?void 0:a.length)-s),o=a==null?void 0:a.slice(-s).trim();return n.jsx(He,{title:e,className:r,style:{maxWidth:"100%"},ellipsis:{suffix:o},children:t})},X={tokenInfo:{symbol:"",chain:"",start_time:"",end_time:""},indicatorInfo:{required_level:1,handle_name:"",name:"",description:"",doc:"",type:null,param_schema:null},base_params:{},extra_params:{},klineType:"kline",hasLevelAuth:!0,options:null,priceList:[],indicatorDetailList:[],indicatorList:[]},f=ge(ye()(_e(s=>({...X,resetChartPanelData:({refreshChart:a})=>s(r=>{r.base_params={},r.extra_params={},r.klineType="kline",r.indicatorDetailList=null,a&&(r.options=null)}),removeChartStore:()=>s(X),setDraftData:a=>s(r=>{a(r)})})))),Le="_header_10y0z_1",Ue="_leftWrapper_10y0z_6",Ge="_title_10y0z_9",Ve="_left_10y0z_6",Ke="_skeleton_10y0z_27",Xe="_leftTop_10y0z_31",qe="_logo_10y0z_35",Je="_name_10y0z_39",Ze="_arrow_10y0z_47",Qe="_leftBottom_10y0z_50",et="_right_10y0z_53",tt="_itemInfo_10y0z_59",st="_valueInfo_10y0z_79",nt="_tokenContent_10y0z_93",at="_content_10y0z_99",rt="_item_10y0z_59",ot="_itemHeader_10y0z_124",it="_itemHeaderName_10y0z_127",ct="_itemHeaderDesc_10y0z_133",lt="_rightBottom_10y0z_149",dt="_contract_address_10y0z_154",ut="_chainTabs_10y0z_163",_={header:Le,leftWrapper:Ue,title:Ge,left:Ve,skeleton:Ke,leftTop:Xe,logo:qe,name:Je,arrow:Ze,leftBottom:Qe,right:et,itemInfo:tt,valueInfo:st,tokenContent:nt,content:at,item:rt,itemHeader:ot,itemHeaderName:it,itemHeaderDesc:ct,rightBottom:lt,contract_address:dt,chainTabs:ut},ht=[{key:"ethereum",label:"Ethereum"},{key:"base",label:"Base"}],mt=()=>{const[s,a]=C(!1),[r,e]=C(""),[t,o]=C("ethereum"),[c,i]=C([]),[l,h]=Z(),d=f.use.setDraftData(),u=f.use.resetChartPanelData(),g=f.use.tokenInfo(),[m,x]=C(null),{data:j=[]}=S(()=>Be({key:r,chain:t}),{refreshDeps:[r,t],onSuccess:p=>{if(!m&&g){const k=p.find(U=>U.symbol===g.symbol&&U.chain===U.chain);x(k||p[0])}}});S(()=>m?ze({symbol:m.symbol,chain:m.chain}):null,{refreshDeps:[m],onSuccess:p=>{i(p?xe(p):[])},onError:()=>{i([])}});const N=p=>{const k=new URLSearchParams(l);k.set("symbol",p.symbol),k.set("chain",p.chain),h(k),x(p),a(!1)},w=p=>{o(p),e("")},{run:b}=ve(p=>{e(p)},{wait:200});React.useEffect(()=>{m&&(u({refreshChart:!0}),d(p=>{p.tokenInfo={symbol:m.symbol,chain:m.chain,start_time:"",end_time:""}}))},[m]);const P=p=>{p&&(window.location.href=`/charts?symbol=${m.symbol}&handle_name=${p.handle_name}&chain=${m.chain}`)},T=n.jsxs("div",{className:_.tokenContent,children:[n.jsx(antd.Tabs,{defaultActiveKey:t,onChange:w,items:ht,className:_.chainTabs}),n.jsx("div",{className:_.search,children:n.jsx(antd.Input,{onChange:p=>{b(p.target.value)},allowClear:!0,placeholder:"search by token name or symbol or address",style:{height:32,background:"#222324"},suffix:n.jsx(be,{style:{color:"gray"}})})}),n.jsx("div",{className:_.content,children:j==null?void 0:j.map((p,k)=>n.jsxs("div",{className:_.item,onClick:()=>{N(p)},children:[n.jsx("div",{className:_.left,children:n.jsx("img",{src:p.icon_url,alt:""})}),n.jsxs("div",{className:_.right,children:[n.jsxs("div",{className:_.itemHeader,children:[n.jsx("span",{className:_.itemHeaderName,children:p.symbol}),n.jsx("span",{className:_.itemHeaderDesc,children:p.name})]}),n.jsx("div",{className:_.rightBottom,children:n.jsx(K,{className:_.contract_address,title:p.contract_address,children:p.contract_address})})]})]},k))})]});return n.jsxs("div",{className:_.header,children:[n.jsx("div",{className:_.leftWrapper,children:n.jsx(antd.Popover,{open:s,onOpenChange:p=>{a(p)},placement:"bottomLeft",content:T,trigger:["click"],children:n.jsx("div",{className:_.left,children:m?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:_.leftTop,children:[n.jsx("img",{className:_.logo,src:m==null?void 0:m.icon_url,alt:""}),n.jsx("p",{className:R(_.name,["common-ellipsis-1"]),children:m==null?void 0:m.name}),n.jsx(Ie,{style:{color:"rgba(255, 255, 255, 0.45)",fontWeight:"bolder"},className:_.arrow})]}),n.jsx(K,{className:_.leftBottom,title:m==null?void 0:m.contract_address,children:m==null?void 0:m.contract_address})]}):n.jsxs("div",{className:_.skeleton,children:[n.jsx(antd.Skeleton.Avatar,{style:{marginRight:10,width:18,height:18},active:!0,size:"small"}),n.jsx(antd.Skeleton.Input,{style:{width:160,height:18},active:!0,size:"small"}),n.jsx(antd.Skeleton.Input,{style:{width:191,height:10,marginTop:7},active:!0,size:"small"})]})})})}),n.jsx("div",{className:_.right,children:c==null?void 0:c.map((p,k)=>n.jsxs("div",{className:_.itemInfo,onClick:()=>P(p),children:[n.jsx("div",{className:_.title,children:p.title}),n.jsxs("div",{className:_.valueInfo,children:[n.jsx("span",{children:v(p.value)}),p.type!=="neutral"&&n.jsxs("span",{style:{color:p.type==="rise"?"#36F097":"#EB5757"},children:[p.type==="rise"?"+":"-",p.percentage]})]})]},k))})]})},pt="_searchWrapper_100mi_1",ft="_search_100mi_1",gt="_filter_100mi_25",yt="_category_100mi_28",_t="_categoryItem_100mi_36",xt="_categoryName_100mi_53",jt="_categoryItemSelected_100mi_68",vt="_group_100mi_79",bt="_groupToCategory_100mi_79",It="_groupToCategoryIcon_100mi_90",Tt="_groupToCategoryTitle_100mi_96",kt="_groupList_100mi_102",Ct="_result_100mi_113",Mt="_resultToCategory_100mi_113",St="_resultToCategoryIcon_100mi_124",Nt="_resultToCategoryTitle_100mi_130",wt="_resultIndicatorWrapper_100mi_136",Pt="_resultIndicatorItem_100mi_142",At="_indicatorItem_100mi_145",Dt="_indicatorItemLevel_100mi_159",Yt="_indicatorItemLevel0_100mi_171",Ot="_indicatorItemLevel1_100mi_175",Bt="_indicatorItemLevel2_100mi_179",zt="_indicatorName_100mi_183",Et="_indicatorItemActive_100mi_187",y={searchWrapper:pt,search:ft,filter:gt,category:yt,categoryItem:_t,categoryName:xt,categoryItemSelected:jt,group:vt,groupToCategory:bt,groupToCategoryIcon:It,groupToCategoryTitle:Tt,groupList:kt,result:Ct,resultToCategory:Mt,resultToCategoryIcon:St,resultToCategoryTitle:Nt,resultIndicatorWrapper:wt,resultIndicatorItem:Pt,indicatorItem:At,indicatorItemLevel:Dt,indicatorItemLevel0:Yt,indicatorItemLevel1:Ot,indicatorItemLevel2:Bt,indicatorName:zt,indicatorItemActive:Et},$t=({indicatorList:s,selectCategory:a})=>{const r=f.use.indicatorInfo();return n.jsx("div",{className:y.category,children:(s||[]).map(({category:e,groups:t},o)=>{const c=t.reduce((i,l)=>i+=l.indicators.length,0);return n.jsxs("div",{className:R(y.categoryItem,{[y.categoryItemSelected]:r.category===e}),onClick:()=>a(o),children:[e.length>=15?n.jsx(antd.Tooltip,{title:e,children:n.jsx("span",{className:R(y.categoryName,["common-ellipsis-1"]),children:e})}):e,n.jsx("span",{className:y.indicatorsNum,children:c})]},o)})})},re=s=>{const{param_schema:a,category:r,handle_name:e,required_level:t,name:o,type:c}=s||{},i=f.use.setDraftData(),l=f.use.indicatorInfo(),h=f.use.resetChartPanelData(),[d,u]=Z(),g=()=>{const{extra_params_schema:x={}}=JSON.parse(a||null)||{};if(x.properties){const j={},N=x.properties;return Object.keys(N).forEach(w=>{var p;const b=N[w],P=b==null?void 0:b.default,T=(p=b==null?void 0:b.props)==null?void 0:p.default_value;P!=null?j[w]=b.default:T!=null&&(j[w]=b.props.default_value)}),j}return{}},m=()=>{h({refreshChart:l.category!==r||c!==l.type});const x=new URLSearchParams(d);x.set("handle_name",s.handle_name),u(x),i(j=>{j.indicatorInfo=s}),i(j=>{j.extra_params=g()})};return n.jsxs("div",{className:R(y.indicatorItem,[{[y.indicatorItemActive]:l.handle_name===e}]),onClick:m,children:[n.jsx("span",{className:R(y.indicatorItemLevel,{[y[`indicatorItemLevel${t-1}`]]:!0}),children:`L${t-1}`}),n.jsx("span",{className:y.indicatorName,children:o})]})},oe=({backPreView:s,indicatorList:a=[],selectedCategoryIndex:r,showBack:e=!0})=>{var c;const{items:t,defaultActiveKey:o}=React.useMemo(()=>{var h;const i=(((h=a[r])==null?void 0:h.groups)||[]).filter(d=>{var u;return((u=d.indicators)==null?void 0:u.length)>0}).map((d,u)=>{const g=d.indicators.map((m,x)=>n.jsx(re,{...m},x));return{key:u,label:n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[d.group_name,n.jsx("span",{children:d.indicators.length})]}),children:g}}),l=i.map(d=>d.key);return{items:i,defaultActiveKey:l}},[a,r]);return n.jsxs("div",{className:y.group,children:[e?n.jsxs("div",{className:y.groupToCategory,onClick:s,children:[n.jsx(ee,{className:y.groupToCategoryIcon}),n.jsx("span",{className:y.groupToCategoryTitle,children:"All Categories"})]}):null,n.jsx("div",{style:{marginLeft:20},children:(c=a[r])==null?void 0:c.category}),n.jsx("div",{className:y.groupList,children:n.jsx(antd.Collapse,{items:t,defaultActiveKey:o})})]})},ie=({backPreView:s,indicatorList:a=[],searchKeyword:r=""})=>{const t=React.useMemo(()=>a.reduce((o,c)=>(o=o.concat(...c.groups.map(i=>i.indicators)),o),[]),[a]).filter(o=>o.name.toLowerCase().includes(r.toLowerCase()));return n.jsxs("div",{className:y.result,children:[n.jsxs("div",{className:y.resultToCategory,onClick:s,children:[n.jsx(ee,{className:y.resultToCategoryIcon}),n.jsx("span",{className:y.resultToCategoryTitle,children:"Filtered results"})]}),n.jsx("div",{className:y.resultIndicatorWrapper,children:(t||[]).map((o,c)=>n.jsx("div",{className:y.resultIndicatorItem,children:n.jsx(re,{...o})},c))})]})};function ce({initStackList:s}){const[a,r]=C(s);return{stackTop:a[a.length-1],stackIn:c=>{r(i=>{i.push(c)})},stackOut:()=>{r(c=>{c.pop()})}}}const Rt=()=>{const s=f.use.indicatorList(),{stackTop:a,stackIn:r,stackOut:e}=ce({initStackList:[0]}),[t,o]=C(""),[c,i]=C(0),l=g=>{o(g.target.value),g.target.value?a!==2&&r(2):e()},h=g=>{i(g),r(1)},d=()=>{e(),o("")},u={0:n.jsx($t,{indicatorList:s,selectCategory:h}),1:n.jsx(oe,{backPreView:e,indicatorList:s,selectedCategoryIndex:c}),2:n.jsx(ie,{backPreView:d,indicatorList:s,searchKeyword:t})};return n.jsxs("div",{className:y.search,children:[n.jsx("div",{className:y.filter,children:n.jsx(antd.Input,{placeholder:"Filter Metrics",suffix:Y.filterMetries,allowClear:!0,onChange:l,value:t})}),u[a]]})},Ft=()=>{const s=f.use.indicatorList(),a=React.useMemo(()=>[{groups:s.reduce((d,u)=>(d.push({group_name:u.category,indicators:u.groups.reduce((g,m)=>g.concat(m.indicators.filter(x=>x.collected)),[])}),d),[])}],[s]),[r,e]=C(""),{stackTop:t,stackIn:o,stackOut:c}=ce({initStackList:[0]}),i=d=>{e(d.target.value),d.target.value?t!==1&&o(1):c()},l=()=>{c(),e("")},h={0:n.jsx(oe,{indicatorList:a,selectedCategoryIndex:0,showBack:!1}),1:n.jsx(ie,{backPreView:l,indicatorList:a,searchKeyword:r})};return n.jsxs("div",{className:y.search,children:[n.jsx("div",{className:y.filter,children:n.jsx(antd.Input,{placeholder:"Filter Metrics",suffix:Y.filterMetries,allowClear:!0,onChange:i,value:r})}),h[t]]})},Wt=[{key:"1",label:"All Indicators",children:n.jsx(Rt,{})},{key:"2",label:"My Collected",children:n.jsx(Ft,{})}],Ht=()=>{const s=f.use.setDraftData();return S(ae,{onSuccess:a=>{s(r=>{r.indicatorList=a})}}),n.jsx("div",{className:y.searchWrapper,children:n.jsx(antd.Tabs,{type:"card",destroyInactiveTabPane:!0,defaultActiveKey:"1",items:Wt})})},Lt=({options:s})=>{const a=React.useRef(),r=React.useRef();return Te("resize",()=>{var e;(e=r.current)==null||e.resize()}),React.useEffect(()=>{window.addEventListener("menuChange",()=>{var e;(e=r.current)==null||e.resize()})},[]),React.useEffect(()=>{r.current=echarts.init(a.current)},[]),React.useEffect(()=>{if(!s){r.current.clear();return}console.log("echartsOptions:",s),r.current.setOption(s)},[s]),n.jsx("div",{ref:a,style:{width:"100%",height:"100%"}})};function Ut(s){return s.map(a=>[a.open,a.close,a.low,a.high])}const F=(s,a)=>{const r=[...s];for(;r.length<a;)r.unshift(null);return r},O=(s,a)=>{if(s!=null&&s.length)switch(a){case"kline":return{name:"KLine",data:Ut(s),type:"candlestick",itemStyle:{color0:"#F63C6B",color:"#0FEDBE",borderColor0:"#F63C6B",borderColor:"#0FEDBE"},yAxisIndex:0,z:0};case"avgPrice":return{name:"Avg Price",data:s.map(r=>r==null?void 0:r.avg_price),type:"line",smooth:!0,yAxisIndex:0,z:0}}return{}},B=s=>({type:"category",data:s.map(a=>dayjs(a.time).format("YYYY-MM-DD"))}),L=()=>({type:"value",position:"left",axisLabel:{formatter:function(s){return v(s)}},splitLine:{show:!0,lineStyle:{color:"rgba(200, 200, 200, 0.4)",width:.3,type:"solid"}}}),z=s=>{let a=`<strong>Date:</strong> ${s[0].axisValue}<br/>`;return s.forEach(r=>{if(r.seriesType==="candlestick"){const[e,t,o,c,i]=r.value,l=((o-t)/t*100).toFixed(2),h=((i-c)/c*100).toFixed(2);a+=`
              <div style="margin: 5px 0; line-height: 1.5;">
                <strong>${r.seriesName}:</strong> 
                <span style="color: #999;">O:</span> ${v(t)} 
                <span style="color: #999;">C:</span> ${v(o)} 
                <span style="color: #999;">L:</span> ${v(c)} 
                <span style="color: #999;">H:</span> ${v(i)}
              </div>
              <div>
              <div>
              <strong>Change:</strong> 
              <span style="color: ${l>=0?"green":"red"};">${l}%</span>
              </div>
              <div>
              <strong>Amplitude:</strong>
              <span">${h}%</span>
              </div>
              </div>
            `}else r.axisType==="yAxis.category"?a+=`
                <div>
                  <strong>${r.seriesName}:</strong> ${v(r.value)}
                </div>
          `:r.axisType==="xAxis.value"||(a+=`
                <div >
                <strong>${r.seriesName}:</strong> ${v(r.value)}
                </div>
          `)}),a},E={dataZoom:[{type:"slider",xAxisIndex:0,filterMode:"filter",backgroundColor:"#2d4137",borderColor:"transparent"},{type:"inside",xAxisIndex:0,filterMode:"filter"}],grid:{top:"10%",left:"2%",right:"2%",bottom:"12%",containLabel:!0},legend:{},graphic:[{type:"text",left:"center",top:"center",style:{text:"tokenalytic.com",fontSize:80,fill:"rgba(100, 100, 0, 0.4)",textAlign:"center"}}],legend:{textStyle:{color:"#ccc"}}},le=(s,a)=>{const r=a.reduce((d,u)=>u.low<d?u.low:d,a[0].low),e=a.reduce((d,u)=>u.high>d?u.high:d,a[0].high);let t=[...s];const o=s[0].price_range_upper-s[0].price_range_lower;if(o===0)return t=[],{newIndicatorData:t,klineMinPrice:r,klineMaxPrice:e};const c=s.reduce((d,u)=>u.price_range_upper>d?u.price_range_upper:d,s[0].price_range_upper),i=s.reduce((d,u)=>u.price_range_lower<d?u.price_range_lower:d,s[0].price_range_lower),l=Math.floor((i-r)/o),h=Math.ceil((e-c)/o);console.log("step",o),console.log("klineMinPrice",r,"klineMaxPrice",e),console.log("minPrice",i,"maxPrice",c),console.log("toFixedStepsLower",l),console.log("toFixedStepsUpper",h);for(let d=0;d<l;d++)t.unshift({price_range_lower:i-o*(d+1),price_range_upper:i-o*d,positive_value:0,negative_value:0});for(let d=0;d<h;d++)t.push({price_range_lower:c+o*d,price_range_upper:c+o*(d+1),positive_value:0,negative_value:0});return{newIndicatorData:t,klineMinPrice:r,klineMaxPrice:e}};function Gt({indicatorDetailList:s,priceList:a,klineType:r}){s=F(s,a.length);const e={...E,tooltip:{trigger:"axis",formatter:function(t){return z(t)}},xAxis:[B(a)],yAxis:[{type:"value",name:"price($)",splitLine:{show:!0,lineStyle:{color:"rgba(200, 200, 200, 0.4)",width:.1,type:"solid"}}}],series:[]};if(a!=null&&a.length){const t=O(a,r);e.series.push(t)}return s!=null&&s.length&&e.series.push({name:"Indicator",data:s.map(t=>t==null?void 0:t.value),type:"line",areaStyle:{color:"rgba(0, 123, 255, 0.2)"},smooth:!0,symbol:"none"}),e}function q({indicatorDetailList:s,priceList:a,klineType:r}){s=F(s,a.length);const e={...E,tooltip:{trigger:"axis",formatter:function(t){return z(t)}},xAxis:a!=null&&a.length?[B(a)]:[],yAxis:[],series:[]};if(a!=null&&a.length){e.yAxis.push({type:"value",name:"price($)",position:"right",splitLine:{show:!1}});const t=O(a,r);e.series.push(t)}return s!=null&&s.length&&(e.yAxis.push(L()),e.series.push({name:"Indicator",data:s.map(t=>t==null?void 0:t.value),type:"line",smooth:!0,symbol:"none",yAxisIndex:1})),e}function Vt({indicatorDetailList:s,priceList:a,klineType:r}){s=F(s,a.length);const e={...E,tooltip:{trigger:"axis",formatter:function(t){return z(t)}},xAxis:B(a),yAxis:[],series:[]};if(a!=null&&a.length){e.yAxis.push({type:"value",name:"price",position:"right",splitLine:{show:!1}});const t=O(a,r);e.series.push(t)}return s!=null&&s.length&&(e.yAxis.push(L()),e.series.push({name:"Indicator",data:s.map(t=>t==null?void 0:t.value),type:"bar",yAxisIndex:1,barCategoryGap:"60%",itemStyle:{color:t=>t.value<0?"rgba(255, 127, 80, 0.4)":"rgba(30, 214, 255, 0.4)"}})),e}function Kt({indicatorDetailList:s,priceList:a,klineType:r}){s=F(s,a.length);const e={...E,tooltip:{trigger:"axis",formatter:function(t){return z(t)}},xAxis:B(a),yAxis:[],series:[]};if(a!=null&&a.length){e.yAxis.push({type:"value",name:"price",position:"right",splitLine:{show:!1}});const t=O(a,r);e.series.push(t)}return s!=null&&s.length&&(e.yAxis.push(L()),e.series.push({name:"Positive Value",data:s.map(t=>t==null?void 0:t.positive_value),type:"bar",stack:"x-bar-stack",itemStyle:{color:"rgba(30, 214, 255, 0.5)"},tooltip:{valueFormatter:t=>v(t)},yAxisIndex:1,barCategoryGap:"60%"}),e.series.push({name:"Negative Value",data:s.map(t=>t==null?void 0:t.negative_value),type:"bar",stack:"x-bar-stack",itemStyle:{color:" rgba(255, 127, 80, 0.5)"},tooltip:{valueFormatter:t=>v(t)},yAxisIndex:1})),e}function Xt({indicatorDetailList:s,priceList:a,klineType:r}){const e={...E,tooltip:{trigger:"axis",formatter:function(t){return z(t)}},xAxis:[B(s)],yAxis:[],series:[]};if(a!=null&&a.length){e.yAxis.push({type:"value",name:"price",splitLine:{show:!1},position:"right",nameLocation:"middle"});const t=O(a,r);e.series.push(t)}if(s!=null&&s.length){const{newIndicatorData:t,klineMinPrice:o,klineMaxPrice:c}=le(s,a);e.yAxis[0].min=o,e.yAxis[0].max=c,e.xAxis.push({type:"value",name:"Volume",nameLocation:"middle",splitLine:{show:!0,lineStyle:{color:"rgba(200, 200, 200, 0.4)",width:.5,type:"solid"}}}),e.yAxis.push({type:"category",data:t.map(i=>i.price_range_lower),name:"Price Levels",nameLocation:"middle",position:"left",axisLabel:{formatter:function(i){return v(i)}}}),e.series.push({name:"Indicator",type:"bar",data:t.map(i=>i.total_Value),barWidth:"40%",itemStyle:{color:i=>i.value<0?"rgba(255, 127, 80, 0.4)":"rgba(30, 214, 255, 0.4)"}}),e.series[e.series.length-1].xAxisIndex=e.series.length-1,e.series[e.series.length-1].yAxisIndex=e.series.length-1}return e}function qt({indicatorDetailList:s,priceList:a,klineType:r}){const e={...E,tooltip:{trigger:"axis",formatter:function(t){return z(t)}},xAxis:[B(a)],yAxis:[],series:[]};if(a!=null&&a.length&&(e.yAxis.push({type:"value",name:"price",nameLocation:"middle",splitLine:{show:!0,lineStyle:{color:"rgba(200, 200, 200, 0.4)",width:.5,type:"solid"}},position:"right"}),e.series.push(O(a,r))),s!=null&&s.length){const{newIndicatorData:t,klineMinPrice:o,klineMaxPrice:c}=le(s,a);e.yAxis[0].min=v(o),e.yAxis[0].max=v(c),e.xAxis.push({type:"value",name:"Volume",nameLocation:"middle",splitLine:{show:!0,lineStyle:{color:"rgba(200, 200, 200, 0.4)",width:.5,type:"solid"}},axisLabel:{formatter:function(i){return v(i)}}}),e.yAxis.push({type:"category",data:t.map(i=>i.price_range_lower),name:"Price Levels",nameLocation:"middle",position:"left",axisLabel:{formatter:function(i){return v(i)}}}),e.series.push({name:"Positive Value",data:t.map(i=>i.positive_value),type:"bar",stack:"y-bar-stack",itemStyle:{color:"rgba(30, 214, 255, 0.5)"},yAxisIndex:1,xAxisIndex:1}),e.series.push({name:"Negative Value",data:t.map(i=>i.negative_value),type:"bar",stack:"y-bar-stack",itemStyle:{color:"rgba(255, 127, 80, 0.5)"},yAxisIndex:1,xAxisIndex:1})}return e}function Jt({indicatorDetailList:s,priceList:a,klineType:r}){const e=F(s[0],a.length),t=F(s[1],a.length),o={...E,tooltip:{trigger:"axis",formatter:function(c){return z(c)}},xAxis:[B(a)],yAxis:[],series:[]};if(a!=null&&a.length){o.yAxis.push({type:"value",name:"price($)",position:"right",splitLine:{show:!1}});const c=O(a,r);o.series.push(c)}return s!=null&&s.length&&(o.yAxis.push(L()),o.series.push({name:"indicator",data:e.map(c=>c==null?void 0:c.value),type:"line",areaStyle:{color:"rgba(100, 23, 25, 0.2)"},smooth:!0,symbol:"none",yAxisIndex:1}),o.series.push({name:"indicator",data:t.map(c=>c==null?void 0:c.value),type:"line",areaStyle:{color:"rgba(0, 123, 255, 0.2)"},smooth:!0,symbol:"none",yAxisIndex:1})),o}function Zt({type:s,indicatorDetailList:a=[],priceList:r=[],klineType:e=""}){switch(console.log("type",s),s){case A.PRICE_LINE:return Gt({indicatorDetailList:a,priceList:r,klineType:e});case A.INDEPENDENT_LINE:return q({indicatorDetailList:a,priceList:r,klineType:e});case A.X_BAR:return Vt({indicatorDetailList:a,priceList:r,klineType:e});case A.X_BAR_STACK:return Kt({indicatorDetailList:a,priceList:r,klineType:e});case A.Y_BAR:return Xt({indicatorDetailList:a,priceList:r,klineType:e});case A.Y_BAR_STACK:return qt({indicatorDetailList:a,priceList:r,klineType:e});case A.AREA_STACK:return Jt({indicatorDetailList:a,priceList:r,klineType:e});default:return q({indicatorDetailList:a,priceList:r,klineType:e})}}const Qt="_dataPanel_119t1_1",es="_maskBackground_119t1_7",ts="_echartsPanel_119t1_14",ss="_setting_119t1_14",ns="_settingTitle_119t1_20",as="_baseSettingTitle_119t1_29",rs="_echartsWrapper_119t1_38",H={dataPanel:Qt,maskBackground:es,echartsPanel:ts,setting:ss,settingTitle:ns,baseSettingTitle:as,echartsWrapper:rs},os=()=>{const{symbol:s,chain:a,start_time:r,end_time:e}=f.use.tokenInfo(),{handle_name:t,type:o}=f.use.indicatorInfo(),c=f.use.indicatorDetailList(),i=f.use.priceList(),l=f.use.klineType(),h=f.use.base_params(),d=f.use.extra_params(),u=f.use.options(),g=f.use.setDraftData(),{loading:m,error:x,run:j}=S(()=>!s||!a||!t?[]:Ee({symbol:s,chain:a,start_time:r,end_time:e,handle_name:t,base_params:h,extra_params:d}),{refreshDeps:[s,a,r,e,t,h,d],onSuccess:T=>{g(p=>{p.indicatorDetailList=T})}}),{loading:N,error:w,run:b}=S(()=>!s||!a?[]:$e({symbol:s,chain:a,start_time:r,end_time:e}),{refreshDeps:[s,a,r,e],onSuccess:T=>{g(p=>{p.priceList=T})}});React.useEffect(()=>{c!=null&&c.length&&(i!=null&&i.length)&&l&&o&&g(T=>{T.options=Zt({type:o,indicatorDetailList:c,priceList:i,klineType:l})})},[c,i,l,o]);const P=()=>x||w?n.jsx(ke,{style:{color:"gray"},onClick:()=>{j(),b()}}):n.jsxs(n.Fragment,{children:[m||N?n.jsx(Ce,{style:{fontSize:20,position:"absolute"}}):null,n.jsx(Lt,{options:u})]});return n.jsx("div",{className:H.echartsWrapper,children:P()})},is="_maskGuide_1mrhj_1",cs="_content_1mrhj_14",ls="_text_1mrhj_19",ds="_upgradeBtn_1mrhj_33",us="_upgradeBtnText_1mrhj_36",M={maskGuide:is,content:cs,text:ls,upgradeBtn:ds,upgradeBtnText:us},hs=()=>{const s=Q(),a=()=>{window.location.href="/sign-in"},r=()=>{window.location.href="/sign-up"},e=()=>{window.location.href="/pricing"};return n.jsx("div",{className:M.maskGuide,children:n.jsxs("div",{className:M.content,children:[Y.lock,n.jsx("span",{className:M.text,children:"when to buy token?"}),n.jsx("span",{className:M.text,children:"When to sell ?"}),n.jsx("span",{className:M.text,children:"Find out the best timing to by token"}),n.jsx("div",{children:!s||!s.level?n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsx(antd.Button,{className:M.upgradeBtn,onClick:r,children:" sign-up"}),n.jsx(antd.Button,{className:M.upgradeBtn,type:"primary",onClick:a,children:" sign-in"})]}):n.jsx("div",{children:n.jsx(antd.Button,{className:M.upgradeBtn,type:"primary",onClick:e,children:n.jsx("span",{className:M.upgradeBtnText,children:"Upgrade Now"})})})})]})})},ms="_topInfo_1739h_1",ps="_info_1739h_10",fs="_indicatorItemLevel_1739h_14",gs="_indicatorItemLevel0_1739h_26",ys="_indicatorItemLevel1_1739h_30",_s="_indicatorItemLevel2_1739h_34",xs="_title_1739h_38",W={topInfo:ms,info:ps,indicatorItemLevel:fs,indicatorItemLevel0:gs,indicatorItemLevel1:ys,indicatorItemLevel2:_s,title:xs},js=()=>{const{handle_name:s,collected:a}=f.use.indicatorInfo(),r=f.use.base_params(),e=f.use.extra_params(),t=f.use.setDraftData(),{run:o}=S(ae,{manual:!0,onSuccess:u=>{t(g=>{g.indicatorList=u})}}),{runAsync:c,loading:i}=S(Re,{manual:!0,onSuccess:()=>{t(u=>{u.indicatorInfo.collected=!0}),o()},onError:u=>{console.error("Failed to toggle collection status:",u)}}),{runAsync:l,loading:h}=S(Fe,{manual:!0,onSuccess:()=>{t(u=>{u.indicatorInfo.collected=!1}),o()},onError:u=>{console.error("Failed to toggle collection status:",u)}}),d=()=>{const u={handle_name:s,base_params:JSON.stringify(r),extra_params:JSON.stringify(e)};a?l(u):c(u)};return n.jsx("div",{onClick:d,style:{cursor:i||h?"wait":"pointer",padding:"8px"},children:a?n.jsx(Me,{style:{color:"#fadb14",opacity:i||h?.5:1}}):n.jsx(Se,{style:{opacity:i||h?.5:1}})})},vs=()=>{const s=f.use.indicatorInfo();return n.jsxs("div",{className:W.topInfo,children:[n.jsxs("div",{className:W.info,children:[n.jsx("span",{className:R(W.indicatorItemLevel,{[W[`indicatorItemLevel${s.required_level-1}`]]:!0}),children:`L${s.required_level-1}`}),n.jsx("span",{className:W.title,children:s.name}),n.jsx(antd.Tooltip,{title:n.jsxs("div",{children:[s.description,s.doc&&n.jsx("a",{href:s.doc,target:"_blank",rel:"noopener noreferrer",style:{marginLeft:"8px",color:"green"},children:"LearnMore"})]}),placement:"right",children:n.jsx(te,{})})]}),n.jsx("div",{children:n.jsx(js,{})})]})},bs="_componentWrapper_1nvt9_1",Is="_setting_1nvt9_4",Ts="_baseSetting_1nvt9_8",ks="_title_1nvt9_12",Cs="_checkboxGrop_1nvt9_28",Ms="_saveParam_1nvt9_36",$={componentWrapper:bs,setting:Is,baseSetting:Ts,title:ks,checkboxGrop:Cs,saveParam:Ms};var de={exports:{}};(function(s,a){(function(r,e){s.exports=e()})(se,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(e,t,o){var c=t.prototype,i=c.format;o.en.formats=r,c.format=function(l){l===void 0&&(l="YYYY-MM-DDTHH:mm:ssZ");var h=this.$locale().formats,d=function(u,g){return u.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(m,x,j){var N=j&&j.toUpperCase();return x||g[j]||r[j]||g[N].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(w,b,P){return b||P.slice(1)})})}(l,h===void 0?{}:h);return i.call(this,d)}}})})(de);var Ss=de.exports;const Ns=ne(Ss);var ue={exports:{}};(function(s,a){(function(r,e){s.exports=e()})(se,function(){return function(r,e,t){e.prototype.isBetween=function(o,c,i,l){var h=t(o),d=t(c),u=(l=l||"()")[0]==="(",g=l[1]===")";return(u?this.isAfter(h,i):!this.isBefore(h,i))&&(g?this.isBefore(d,i):!this.isAfter(d,i))||(u?this.isBefore(h,i):!this.isAfter(h,i))&&(g?this.isAfter(d,i):!this.isBefore(d,i))}}})})(ue);var ws=ue.exports;const Ps=ne(ws);dayjs.extend(Ns);dayjs.extend(Pe);dayjs.extend(Ps);dayjs.extend(Ae);const As={YY:"year",YYYY:{sectionType:"year",contentType:"digit",maxLength:4},M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMM:{sectionType:"month",contentType:"letter"},MMMM:{sectionType:"month",contentType:"letter"},D:{sectionType:"day",contentType:"digit",maxLength:2},DD:"day",Do:{sectionType:"day",contentType:"digit-with-letter"},d:{sectionType:"weekDay",contentType:"digit",maxLength:2},dd:{sectionType:"weekDay",contentType:"letter"},ddd:{sectionType:"weekDay",contentType:"letter"},dddd:{sectionType:"weekDay",contentType:"letter"},A:"meridiem",a:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},Ds={year:"YYYY",month:"MMMM",monthShort:"MMM",dayOfMonth:"D",dayOfMonthFull:"Do",weekday:"dddd",weekdayShort:"dd",hours24h:"HH",hours12h:"hh",meridiem:"A",minutes:"mm",seconds:"ss",fullDate:"ll",keyboardDate:"L",shortDate:"MMM D",normalDate:"D MMMM",normalDateWithWeekday:"ddd, MMM D",fullTime:"LT",fullTime12h:"hh:mm A",fullTime24h:"HH:mm",keyboardDateTime:"L LT",keyboardDateTime12h:"L hh:mm A",keyboardDateTime24h:"L HH:mm"},G=["Missing UTC plugin","To be able to use UTC or timezones, you have to enable the `utc` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-utc"].join(`
`),J=["Missing timezone plugin","To be able to use timezones, you have to enable both the `utc` and the `timezone` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-timezone"].join(`
`),Ys=(s,a)=>a?(...r)=>s(...r).locale(a):s;class Os{constructor({locale:a,formats:r}={}){this.isMUIAdapter=!0,this.isTimezoneCompatible=!0,this.lib="dayjs",this.dayjs=void 0,this.locale=void 0,this.formats=void 0,this.escapedCharacters={start:"[",end:"]"},this.formatTokenMap=As,this.setLocaleToValue=e=>{const t=this.getCurrentLocaleCode();return t===e.locale()?e:e.locale(t)},this.hasUTCPlugin=()=>typeof dayjs.utc<"u",this.hasTimezonePlugin=()=>typeof dayjs.tz<"u",this.isSame=(e,t,o)=>{const c=this.setTimezone(t,this.getTimezone(e));return e.format(o)===c.format(o)},this.cleanTimezone=e=>{switch(e){case"default":return;case"system":return dayjs.tz.guess();default:return e}},this.createSystemDate=e=>{if(this.hasUTCPlugin()&&this.hasTimezonePlugin()){const t=dayjs.tz.guess();return t!=="UTC"?dayjs.tz(e,t):dayjs(e)}return dayjs(e)},this.createUTCDate=e=>{if(!this.hasUTCPlugin())throw new Error(G);return dayjs.utc(e)},this.createTZDate=(e,t)=>{if(!this.hasUTCPlugin())throw new Error(G);if(!this.hasTimezonePlugin())throw new Error(J);const o=e!==void 0&&!e.endsWith("Z");return dayjs(e).tz(this.cleanTimezone(t),o)},this.getLocaleFormats=()=>{const e=dayjs.Ls,t=this.locale||"en";let o=e[t];return o===void 0&&(o=e.en),o.formats},this.adjustOffset=e=>{if(!this.hasTimezonePlugin())return e;const t=this.getTimezone(e);if(t!=="UTC"){const o=e.tz(this.cleanTimezone(t),!0);if(o.$offset===(e.$offset??0))return e;e.$offset=o.$offset}return e},this.date=(e,t="default")=>{if(e===null)return null;let o;return t==="UTC"?o=this.createUTCDate(e):t==="system"||t==="default"&&!this.hasTimezonePlugin()?o=this.createSystemDate(e):o=this.createTZDate(e,t),this.locale===void 0?o:o.locale(this.locale)},this.getInvalidDate=()=>dayjs(new Date("Invalid date")),this.getTimezone=e=>{var t;if(this.hasTimezonePlugin()){const o=(t=e.$x)==null?void 0:t.$timezone;if(o)return o}return this.hasUTCPlugin()&&e.isUTC()?"UTC":"system"},this.setTimezone=(e,t)=>{if(this.getTimezone(e)===t)return e;if(t==="UTC"){if(!this.hasUTCPlugin())throw new Error(G);return e.utc()}if(t==="system")return e.local();if(!this.hasTimezonePlugin()){if(t==="default")return e;throw new Error(J)}return dayjs.tz(e,this.cleanTimezone(t))},this.toJsDate=e=>e.toDate(),this.parse=(e,t)=>e===""?null:this.dayjs(e,t,this.locale,!0),this.getCurrentLocaleCode=()=>this.locale||"en",this.is12HourCycleInCurrentLocale=()=>/A|a/.test(this.getLocaleFormats().LT||""),this.expandFormat=e=>{const t=this.getLocaleFormats(),o=c=>c.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(i,l,h)=>l||h.slice(1));return e.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(c,i,l)=>{const h=l&&l.toUpperCase();return i||t[l]||o(t[h])})},this.isValid=e=>e==null?!1:e.isValid(),this.format=(e,t)=>this.formatByString(e,this.formats[t]),this.formatByString=(e,t)=>this.dayjs(e).format(t),this.formatNumber=e=>e,this.isEqual=(e,t)=>e===null&&t===null?!0:e===null||t===null?!1:e.toDate().getTime()===t.toDate().getTime(),this.isSameYear=(e,t)=>this.isSame(e,t,"YYYY"),this.isSameMonth=(e,t)=>this.isSame(e,t,"YYYY-MM"),this.isSameDay=(e,t)=>this.isSame(e,t,"YYYY-MM-DD"),this.isSameHour=(e,t)=>e.isSame(t,"hour"),this.isAfter=(e,t)=>e>t,this.isAfterYear=(e,t)=>this.hasUTCPlugin()?!this.isSameYear(e,t)&&e.utc()>t.utc():e.isAfter(t,"year"),this.isAfterDay=(e,t)=>this.hasUTCPlugin()?!this.isSameDay(e,t)&&e.utc()>t.utc():e.isAfter(t,"day"),this.isBefore=(e,t)=>e<t,this.isBeforeYear=(e,t)=>this.hasUTCPlugin()?!this.isSameYear(e,t)&&e.utc()<t.utc():e.isBefore(t,"year"),this.isBeforeDay=(e,t)=>this.hasUTCPlugin()?!this.isSameDay(e,t)&&e.utc()<t.utc():e.isBefore(t,"day"),this.isWithinRange=(e,[t,o])=>e>=t&&e<=o,this.startOfYear=e=>this.adjustOffset(e.startOf("year")),this.startOfMonth=e=>this.adjustOffset(e.startOf("month")),this.startOfWeek=e=>this.adjustOffset(this.setLocaleToValue(e).startOf("week")),this.startOfDay=e=>this.adjustOffset(e.startOf("day")),this.endOfYear=e=>this.adjustOffset(e.endOf("year")),this.endOfMonth=e=>this.adjustOffset(e.endOf("month")),this.endOfWeek=e=>this.adjustOffset(this.setLocaleToValue(e).endOf("week")),this.endOfDay=e=>this.adjustOffset(e.endOf("day")),this.addYears=(e,t)=>this.adjustOffset(t<0?e.subtract(Math.abs(t),"year"):e.add(t,"year")),this.addMonths=(e,t)=>this.adjustOffset(t<0?e.subtract(Math.abs(t),"month"):e.add(t,"month")),this.addWeeks=(e,t)=>this.adjustOffset(t<0?e.subtract(Math.abs(t),"week"):e.add(t,"week")),this.addDays=(e,t)=>this.adjustOffset(t<0?e.subtract(Math.abs(t),"day"):e.add(t,"day")),this.addHours=(e,t)=>this.adjustOffset(t<0?e.subtract(Math.abs(t),"hour"):e.add(t,"hour")),this.addMinutes=(e,t)=>this.adjustOffset(t<0?e.subtract(Math.abs(t),"minute"):e.add(t,"minute")),this.addSeconds=(e,t)=>this.adjustOffset(t<0?e.subtract(Math.abs(t),"second"):e.add(t,"second")),this.getYear=e=>e.year(),this.getMonth=e=>e.month(),this.getDate=e=>e.date(),this.getHours=e=>e.hour(),this.getMinutes=e=>e.minute(),this.getSeconds=e=>e.second(),this.getMilliseconds=e=>e.millisecond(),this.setYear=(e,t)=>this.adjustOffset(e.set("year",t)),this.setMonth=(e,t)=>this.adjustOffset(e.set("month",t)),this.setDate=(e,t)=>this.adjustOffset(e.set("date",t)),this.setHours=(e,t)=>this.adjustOffset(e.set("hour",t)),this.setMinutes=(e,t)=>this.adjustOffset(e.set("minute",t)),this.setSeconds=(e,t)=>this.adjustOffset(e.set("second",t)),this.setMilliseconds=(e,t)=>this.adjustOffset(e.set("millisecond",t)),this.getDaysInMonth=e=>e.daysInMonth(),this.getWeekArray=e=>{const t=this.startOfWeek(this.startOfMonth(e)),o=this.endOfWeek(this.endOfMonth(e));let c=0,i=t;const l=[];for(;i<o;){const h=Math.floor(c/7);l[h]=l[h]||[],l[h].push(i),i=this.addDays(i,1),c+=1}return l},this.getWeekNumber=e=>e.week(),this.getYearRange=([e,t])=>{const o=this.startOfYear(e),c=this.endOfYear(t),i=[];let l=o;for(;this.isBefore(l,c);)i.push(l),l=this.addYears(l,1);return i},this.dayjs=Ys(dayjs,a),this.locale=a,this.formats=Ne({},Ds,r),dayjs.extend(De)}getDayOfWeek(a){return a.day()+1}}const Bs=he({palette:{mode:"dark",primary:{main:"rgba(255, 255, 255, 0.65)"},secondary:{main:"#7451ff",light:"#8f73ff"},error:{main:"#EF8F8F"},background:{default:"#121212",paper:"#1E1E1E"}},spacing:0}),zs=s=>n.jsx(me,{theme:Bs,children:n.jsx(pe,{dateAdapter:Os,children:s.children})}),Es="_home_iuwsz_1",$s="_customDatePicker_iuwsz_9",Rs={home:Es,customDatePicker:$s},Fs=s=>{const{title:a,value:r,tooltip:e,onChange:t}=s,o=c=>{if(c){const i=dayjs(c).format("YYYY-MM-DD");console.log("formatTime on change",i),t(i)}};return n.jsx(zs,{children:n.jsxs("div",{style:{marginTop:5,display:"flex"},children:[e&&n.jsx(antd.Tooltip,{title:e,children:n.jsx(te,{})}),n.jsx("div",{className:Rs.customDatePicker,children:n.jsx(fe,{label:a,value:dayjs(r),onChange:o,slotProps:{popper:{sx:{"& .MuiDateCalendar-root":{zoom:.8}}}},sx:{"& .MuiOutlinedInput-input":{padding:"8px 14px"}}})})]})})},Ws=[{label:"DEX",value:"DEX"},{label:"CEX",value:"CEX"},{label:"MEV Bot",value:"MEV Bot"},{label:"Contract",value:"Contract"},{label:"Staker",value:"Staker"}],Hs=()=>{var g;const s=f.use.setDraftData(),a=f.use.base_params(),r=f.use.extra_params(),{param_schema:e,handle_name:t}=f.use.indicatorInfo(),{use_base_param:o,extra_params_schema:c}=JSON.parse(e||null)||{};c&&(c.displayType="inline");const i=Ye(),l=m=>{s(x=>{x.base_params={exclude_wallets:{by_labels:m}}})},h=m=>{console.log("schema all values:",m),s(x=>{x.extra_params={...r,...m}})},{runAsync:d,loading:u}=S(()=>We({handle_name:t,base_params:JSON.stringify(a),extra_params:JSON.stringify(r)}),{manual:!0});return n.jsxs("div",{className:$.setting,children:[o?n.jsx(antd.Popover,{placement:"bottomLeft",content:n.jsx(antd.Checkbox.Group,{options:Ws,value:((g=a==null?void 0:a.exclude_wallets)==null?void 0:g.by_labels)||[],onChange:l,className:$.checkboxGrop}),getPopupContainer:m=>m.parentNode,children:n.jsxs("span",{className:$.baseSetting,children:[n.jsx("span",{className:$.title,children:"Label Filter"}),n.jsx("span",{children:"DEX / CEX / MEV Bot"}),Y.downOutlined]})}):null,c?n.jsxs("div",{style:{alignItems:"center",display:"flex"},children:[n.jsx(Oe,{form:i,schema:c,widgets:{CustomDatePicker:Fs},watch:{"#":m=>{h(m)}},style:{marginLeft:24}}),n.jsx(antd.Button,{className:$.saveParam,onClick:d,loading:u,size:"small",children:"save"})]}):null]})},Ls=()=>n.jsx("div",{className:$.componentWrapper,children:n.jsx(Hs,{})}),Us="_componentWrapper_b0bie_1",Gs="_calendarContainer_b0bie_8",Vs="_calendarOptions_b0bie_17",Ks="_calendarOption_b0bie_17",Xs="_active_b0bie_35",qs="_calendarPicker_b0bie_40",Js="_iconContainer_b0bie_58",I={componentWrapper:Us,calendarContainer:Gs,calendarOptions:Vs,calendarOption:Ks,active:Xs,calendarPicker:qs,"ant-picker-input":"_ant-picker-input_b0bie_51","ant-picker-suffix":"_ant-picker-suffix_b0bie_54",iconContainer:Js},{RangePicker:Zs}=antd.DatePicker,Qs=()=>{const[s,a]=C(!1),r=f.use.setDraftData(),e=i=>{a(i)},t=(i,l)=>{if(i&&l[0]&&l[1]){const h=dayjs(l[0]).format("YYYY-MM-DD HH:mm:ss"),d=dayjs(l[1]).format("YYYY-MM-DD HH:mm:ss");r(u=>{u.tokenInfo.start_time=h,u.tokenInfo.end_time=d})}},o=i=>{let l="",h=dayjs().format("YYYY-MM-DD HH:mm:ss");switch(i){case"1M":l=dayjs().subtract(1,"month").format("YYYY-MM-DD 00:00:00");break;case"3M":l=dayjs().subtract(3,"month").format("YYYY-MM-DD 00:00:00");break;case"1Y":l=dayjs().subtract(1,"year").format("YYYY-MM-DD 00:00:00");break;case"YTD":l=dayjs().startOf("year").format("YYYY-MM-DD 00:00:00");break;case"All":l="",h="";break}r(d=>{d.tokenInfo.start_time=l,d.tokenInfo.end_time=h})},c=n.jsx("div",{className:I.datePickerContainer,children:n.jsx(Zs,{onChange:t})});return n.jsx("div",{className:I.calendarContainer,children:n.jsxs("div",{className:I.calendarOptions,children:[n.jsx("span",{className:I.calendarOption,onClick:()=>o("1M"),children:"1M"}),n.jsx("span",{className:I.calendarOption,onClick:()=>o("3M"),children:"3M"}),n.jsx("span",{className:I.calendarOption,onClick:()=>o("1Y"),children:"1Y"}),n.jsx("span",{className:I.calendarOption,onClick:()=>o("YTD"),children:"YTD"}),n.jsx("span",{className:I.calendarOption,onClick:()=>o("All"),children:"All"}),n.jsx(antd.Dropdown,{overlay:c,trigger:["click"],open:s,onOpenChange:e,children:n.jsx(antd.Button,{icon:n.jsx(we,{}),className:I.calendarIcon,type:"text"})})]})})},en=()=>{const s=f.use.klineType(),a=f.use.setDraftData(),r=()=>{a(e=>{e.klineType=s==="kline"?"avgPrice":"kline"})};return n.jsx("div",{onClick:r,className:I.iconContainer,children:s==="kline"?Y.switch:Y.kine})},tn=()=>n.jsxs("div",{className:I.componentWrapper,children:[n.jsx(Qs,{}),n.jsx(en,{})]}),sn="_chartSetting_1fkk0_1",nn={chartSetting:sn},an=()=>n.jsxs("div",{className:nn.chartSetting,children:[n.jsx(Ls,{}),n.jsx(tn,{})]}),rn=()=>{const s=Q(),a=f.use.indicatorInfo(),r=n.jsxs("div",{children:[n.jsx(an,{}),n.jsx(os,{})]}),e=n.jsxs(n.Fragment,{children:[n.jsx("div",{className:H.maskBackground,children:Y.maskBackground}),n.jsx(hs,{})]});return n.jsx("div",{className:H.dataPanel,children:n.jsxs("div",{className:H.echartsPanel,children:[n.jsx(vs,{}),a.required_level<=1?r:!s.level||s.level<a.required_level?e:r]})})},on="_charts_zb358_1",cn="_top_zb358_7",ln="_content_zb358_10",V={charts:on,top:cn,content:ln},pn=()=>{const s=je(),a=new URLSearchParams(s.search),r=a.get("chain"),e=a.get("symbol"),t=a.get("handle_name"),o=f.use.removeChartStore(),c=f.use.setDraftData(),i=f.use.indicatorList();return React.useEffect(()=>{e&&t&&i&&c(l=>{l.tokenInfo={symbol:e,chain:r,start_time:"",end_time:""};const h=d=>{for(const u of d)for(const g of u.groups){const m=g.indicators.find(x=>x.handle_name===t);if(m)return m}return console.log("dont find match ind",t,d),{}};l.indicatorInfo=h(i)})},[e,t,i,c]),React.useEffect(()=>()=>{o()},[o]),n.jsxs("div",{className:V.charts,children:[n.jsxs("div",{className:V.top,children:[n.jsx(mt,{}),n.jsx(antd.Divider,{style:{margin:0}})]}),n.jsxs("div",{className:V.content,children:[n.jsx(Ht,{}),n.jsx(antd.Divider,{type:"vertical",style:{height:"100vh",margin:0}}),n.jsx(rn,{})]})]})};export{pn as default};
